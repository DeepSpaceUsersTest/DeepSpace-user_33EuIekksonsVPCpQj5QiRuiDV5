<!DOCTYPE html>
<html>
<head>
  <title>React Widget</title>
  <script crossorigin src="https://unpkg.com/react@18/umd/react.production.min.js"></script>
  <script crossorigin src="https://unpkg.com/react-dom@18/umd/react-dom.production.min.js"></script>
  <style>
    body { 
      margin: 0; 
      padding: 0; 
      font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
    }
    #react-root { 
      width: 100%; 
      height: 100vh; 
      display: flex;
      flex-direction: column;
    }
  </style>
</head>
<body>
  <div id="react-root"></div>
  
  <script>
    // Compiled JSX code
    
    // Extract all React hooks dynamically (present and future)
    const reactHooks = {};
    Object.keys(React).forEach(key => {
      if (key.startsWith('use') && typeof React[key] === 'function') {
        reactHooks[key] = React[key];
      }
    });
    
    // Destructure all available hooks for easy use
    const {
      useState, useEffect, useRef, useMemo, useCallback, useContext, 
      useReducer, useLayoutEffect, useImperativeHandle, useDebugValue,
      useDeferredValue, useId, useInsertionEffect, useSyncExternalStore,
      useTransition, ...otherHooks
    } = { ...reactHooks, ...React };
    
    // Custom hooks for Miyagi widgets
    // useStorage hook will be injected by MiyagiStorageService
    // useGlobalStorage hook will be injected by MiyagiStorageService
    
    function NotepadWidget() {
  // Use our injected storage hook - this will automatically re-render when storage changes
  const [content, setContent] = useStorage('notepad-content', '');
  const textareaRef = useRef(null);

  // Handle content changes
  const handleContentChange = e => {
    setContent(e.target.value);
  };

  // Clear notes
  const clearNotes = () => {
    if (confirm('Clear all notes?')) {
      setContent('');
      textareaRef.current?.focus();
    }
  };

  // Auto-focus on mount
  React.useEffect(() => {
    setTimeout(() => textareaRef.current?.focus(), 100);
  }, []);
  return /*#__PURE__*/React.createElement("div", {
    style: {
      margin: 0,
      padding: '16px',
      fontFamily: '-apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, sans-serif',
      background: '#ffc0cb',
      display: 'flex',
      flexDirection: 'column',
      minHeight: '100vh',
      boxSizing: 'border-box'
    }
  }, /*#__PURE__*/React.createElement("div", {
    style: {
      display: 'flex',
      alignItems: 'center',
      marginBottom: '12px',
      paddingBottom: '8px',
      borderBottom: '1px solid #e5e7eb'
    }
  }, /*#__PURE__*/React.createElement("div", {
    style: {
      fontSize: '16px',
      fontWeight: 600,
      color: '#374151'
    }
  }, "\uD83D\uDCDD Quick Notes (React Test)"), /*#__PURE__*/React.createElement("button", {
    onClick: clearNotes,
    style: {
      marginLeft: 'auto',
      padding: '4px 8px',
      border: 'none',
      borderRadius: '4px',
      background: '#f3f4f6',
      color: '#6b7280',
      fontSize: '12px',
      cursor: 'pointer'
    }
  }, "Clear")), /*#__PURE__*/React.createElement("textarea", {
    ref: textareaRef,
    value: content,
    onChange: handleContentChange,
    placeholder: "Start typing your notes here...",
    style: {
      flex: 1,
      border: 'none',
      outline: 'none',
      resize: 'none',
      background: 'transparent',
      fontFamily: 'inherit',
      fontSize: '14px',
      lineHeight: 1.5,
      color: '#374151',
      minHeight: '200px'
    }
  }));
}

// Export the widget component - the injection script will handle rendering
const WidgetComponent = NotepadWidget;
    
    
    // Auto-render when DOM is ready
    document.addEventListener('DOMContentLoaded', function() {
      const root = ReactDOM.createRoot(document.getElementById('react-root'));
      root.render(React.createElement(WidgetComponent));
    });
  </script>
</body>
</html>